<div class = "container-fluid mt-2">
    <div class="row">
        <learnjs-side-menu></learnjs-side-menu>
        <div class="col-10">
            <h6 class="text-center">LEARN JS 102</h6>
            <h3>Problem</h3>
            <p>
                While  I  am getting Todos as objects from an API call, I need to put them in an Array, so that we can learn map, reduce & filter array functions.
            </p>
            <h3>Solution</h3>
            <ul>
                <li>
                    Create a node app, and install axios to call JSON placeholder todos API.
                </li>
                <li>
                    Use Object.values() function to create an array of todos.
                </li>
            </ul>
            <pre>
            <code> 
            const axios = require('axios');
            axios.get('https://jsonplaceholder.typicode.com/todos')
            .then((response) => {
                let todosArr = todosList(response.data);
                console.log(todosArr);
            })
            .catch(error => {
                console.log(error);
            });
                
            function todosList(todos) {
                let arr = Object.values(todos);
                return arr;
            }  
            </code> 
            </pre>
            <h3>map, filter, reduce</h3>
            <p>
                While  I  am getting Todos as objects from an API call, I need to put them in an Array, so that we can learn map, reduce & filter array functions.
            </p>
            <pre>
            <code> 
            const axios = require('axios');

            function todosList(todos) {
                let arr = Object.values(todos);
                return arr;
            }
                
            axios.get('https://jsonplaceholder.typicode.com/todos')
            .then((response) => {
                let todosArr = todosList(response.data);
                console.log('Total Todos: ' + todosArr.length);
                console.log('Completed Flag for Title: '
                    + todosArr[99].title + ' ' + todosArr[99].completed);
                const todosForUser5 = todosArr
                    .filter(element => element.userId == 5)
                    .map(element => {element.completed = true; return element;});
                    //console.log(todosForUser5);
                console.log('Total Todos for User 5: ' + todosForUser5.length);
                console.log('Completed Flag for Title: '
                    + todosForUser5[19].title + ' '
                    + todosArr[19].completed + '\n');
                const concatenatedTitleForUser5 =  todosForUser5
                    .reduce((acc, element) => acc + element.title, "");
                console.log(concatenatedTitleForUser5);
            })
            .catch(error => {
                console.log(error);
            });                
            </code> 
            </pre>
            <h3>map, filter with Underscore JS</h3>
            <p>
                Another way to complete the task is to make use of available libraries which are developed and maintained by smart programmers who are community committers. One such library is <a href="https://underscorejs.org/">underscore.js.</a> One can install underscore as a node module / or include it from the CDN depending upon whether you are programming for the server or client.
            </p>
            <pre>
            <code> 
            const axios = require('axios');
            const _ = require('underscore');
                
            function todosList(todos) {
                let arr = Object.values(todos);
                return arr;
            }
                
            axios.get('https://jsonplaceholder.typicode.com/todos')
            .then((response) => {
                let todosArrUnderscore = todosList(response.data);
                const unCompletedTodos = _.filter(todosArrUnderscore, element => element.userId == 5 && element.id > 98);
                console.log("----------- Uncompleted Todos -------------");
                console.log(unCompletedTodos);
                const completedTodos = _.map(unCompletedTodos, element => {element.completed = true; return element;});
                console.log("----------- Completed Todos -------------");
                console.log(completedTodos);
            })
            .catch(error => {
                console.log(error);
            });                
            </code> 
            </pre>
            <h3>Asynchronous Callbacks</h3>
            <p>
                As a developer, you may know that JS Engine is single threaded, synchronous execution in its behavior. But we also know that JS Engine supports events like click events, fetch data from an API, timeout which are somewhat asynchronous in nature. Engine supports these events by maintaining an event queue, which is scanned by engine periodically, and executes an event listener if there is one associated to the event.
            </p>
            <p>
                We understand that functions are first class in Javascript, so we can create a function which accepts the function as parameter, registers it as an event listener or a callback function and engine executes that callback function when the event is picked from the event queue. 
            </p>
            <p>
                In the below example clickHandler function is registered as a callback by a setTimeout function. and gets called after a timeout of 3 second.
            </p>
            <pre>
            <code> 
            function clickHandler () {
                console.log('click event');
                }
                console.log('waiting 3 second with a callback to click handler');
                setTimeout (clickHandler, 3000);               
            </code> 
            </pre>
        </div>
    </div>
</div>